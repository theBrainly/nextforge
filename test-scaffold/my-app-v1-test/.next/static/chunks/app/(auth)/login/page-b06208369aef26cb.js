(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665,566],{323:function(e,t,r){Promise.resolve().then(r.bind(r,5522))},5522:function(e,t,r){"use strict";r.d(t,{AuthForm:function(){return x}});var s=r(7437),n=r(2972),a=r.n(n),i=r(9376),o=r(3590),l=r(9501),c=r(4438),u=r(337),d=r(7119);let m=d.Ry({email:d.Z_().email(),password:d.Z_().min(6)}),f=m.extend({name:d.Z_().min(2)});var g=r(7160),h=r(2381),p=r(279);function x(e){var t,r,n;let{mode:d}=e,x=(0,i.useRouter)(),b=(0,g.t)(e=>e.setUser),v=(0,l.cI)({resolver:(0,o.F)("login"===d?m:f),defaultValues:"login"===d?{email:"",password:""}:{name:"",email:"",password:""}}),w=v.handleSubmit(async e=>{try{let t="login"===d?await (0,u.x4)(e):await (0,u.z2)(e);b(t),c.Am.success("login"===d?"Welcome back":"Account created"),x.push("/dashboard")}catch(e){c.Am.error(e instanceof Error?e.message:"Authentication failed")}});return(0,s.jsxs)("form",{className:"space-y-4",onSubmit:w,children:["register"===d?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"name",children:"Name"}),(0,s.jsx)(p.I,{id:"name",placeholder:"Your name",...v.register("name")}),(0,s.jsx)("p",{className:"text-sm text-red-500",children:null===(t=v.formState.errors.name)||void 0===t?void 0:t.message})]}):null,(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"email",children:"Email"}),(0,s.jsx)(p.I,{id:"email",placeholder:"you@example.com",...v.register("email")}),(0,s.jsx)("p",{className:"text-sm text-red-500",children:null===(r=v.formState.errors.email)||void 0===r?void 0:r.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"password",children:"Password"}),(0,s.jsx)(p.I,{id:"password",type:"password",placeholder:"******",...v.register("password")}),(0,s.jsx)("p",{className:"text-sm text-red-500",children:null===(n=v.formState.errors.password)||void 0===n?void 0:n.message})]}),(0,s.jsx)(h.z,{className:"w-full",type:"submit",disabled:v.formState.isSubmitting,children:v.formState.isSubmitting?"Submitting...":"login"===d?"Login":"Create Account"}),(0,s.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:["login"===d?"Don't have an account?":"Already have an account?"," ",(0,s.jsx)(a(),{className:"text-primary underline",href:"login"===d?"/register":"/login",children:"login"===d?"Register":"Login"})]})]})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var s=r(7437),n=r(2265),a=r(3448);let i={default:"bg-primary text-primary-foreground hover:opacity-90",outline:"border border-border bg-background hover:bg-muted",ghost:"hover:bg-muted"},o={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"},l=n.forwardRef((e,t)=>{let{className:r,variant:n="default",size:l="default",...c}=e;return(0,s.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",i[n],o[l],r),ref:t,...c})});l.displayName="Button"},279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(7437),n=r(2265),a=r(3448);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("input",{className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});i.displayName="Input"},337:function(e,t,r){"use strict";r.d(t,{x4:function(){return i},kS:function(){return l},z2:function(){return o}});let s="session_token";var n=r(6434).Buffer;let a=e=>n.from(e).toString("base64url");async function i(e){if(await new Promise(e=>setTimeout(e,350)),!e.email||e.password.length<6)throw Error("Invalid email or password.");let t=a(e.email);document.cookie="".concat(s,"=").concat(t,"; path=/; max-age=86400; samesite=lax"),localStorage.setItem("session_token",t);let r={id:t,name:e.email.split("@")[0],email:e.email};return localStorage.setItem("user",JSON.stringify(r)),r}async function o(e){if(await new Promise(e=>setTimeout(e,500)),!e.name||e.password.length<6)throw Error("Name and password (min 6 chars) are required.");return i(e)}function l(){document.cookie="".concat(s,"=; path=/; max-age=0; samesite=lax"),localStorage.removeItem("session_token"),localStorage.removeItem("user")}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},7160:function(e,t,r){"use strict";r.d(t,{t:function(){return s}});let s=(0,r(3011).U)(e=>({user:null,isAuthenticated:!1,setUser:t=>e({user:t,isAuthenticated:!0}),clearUser:()=>e({user:null,isAuthenticated:!1})}))}},function(e){e.O(0,[137,438,358,972,971,117,744],function(){return e(e.s=323)}),_N_E=e.O()}]);